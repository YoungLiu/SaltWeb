<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="zh">
<head>
    <meta charset="utf-8"/>
    <title>SaltStack Admin - 模板管理</title>
    <meta name="description" content="YoungLiu"/>
    <meta name="keywords" content="YoungLiu"/>
    <!-- We need to emulate IE7 only when we are to use excanvas -->
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <![endif]-->
    <!-- Favicons -->
    <link rel="shortcut icon" type="image/png" href="/static/images/favicons/favicon.png"/>
    <link rel="icon" type="image/png" href="/static/images/favicons/favicon.png"/>
    <link rel="apple-touch-icon" href="/static/images/favicons/apple.png"/>
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="/static/css/main.css" type="text/css"/>
    <!-- Your Custom Stylesheet -->
    <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
    <!-- 用户列表css样式 -->
    <link rel="stylesheet" href="/static/css/tables.css" type="text/css"/>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- jQuery with plugins -->
    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.js"></script>
    <!--
    Could be loaded remotely from Google CDN :
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    -->
    <!-- Superfish Navigation -->
    <script type="text/javascript" src="/static/js/superfish.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.supersubs.min.js"></script>
    <!-- 删除device确认函数 -->
    <script type="text/javascript" src="/static/js/template.js"></script>
    <!-- 顶部导航和底部隐藏的导航的特效输出 -->
    <script type="text/javascript" src="/static/js/nav.show.menu.js"></script>
</head>
<body>
<!-- Header -->
<%include file="header.html" args="curM='hosts',ShowName=ShowName,uid=uid" />
<!-- End of Header -->
<!-- Page title -->
<div id="pagetitle">
    <div class="wrapper">
        <h1>服务管理</h1>
        <!-- Quick search box -->
        <form action="" method="get"><input class="" type="text" id="q" name="q"/></form>
    </div>
</div>
<!-- End of Page title -->

<!-- Page content -->
<div id="page">
    <!-- Wrapper -->
    <div class="wrapper">
        <div>
            <table width=100%>
                <tr>
                    <td><h3>Template列表</h3></td>
                    <td align='right'><a href="/template/add" class="btn"><span class="icon icon-add">&nbsp;</span>添加模板</a>
                    </td>
                </tr>
            </table>
            <table class="datalist" id="datalist">
                <thead>
                <tr>
                    <th>TemplateName</th>
                    <th>TemplateContent</th>
                    <th>Options</th>
                </tr>
                </thead>
                <tbody>
                % for i in getTemplates:
                <%
                templatename = i
                templatecontent = getTemplates[i]
                templatecontent = templatecontent.replace('\r\n', ' ')
                templatecontent = templatecontent.replace('\n', ' ')
                %>
                <tr class="dataline">
                    <td>${templatename}</td>
                    <td>${templatecontent}</td>
                    <td><a href="/template/edit?pid=${templatename}">部署</a> |
                        <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" onclick="editTemplate('${templatename}','${templatecontent}')">编辑</button>
                    </td>
                </tr>
                % endfor
                </tbody>
                <tfoot>
                <tr>
                    <th>TemplateName</th>
                    <th>TemplateContent</th>
                    <th>Options</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <!-- End of Wrapper -->
</div>

<!-- edit template模态框（Modal） -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog"
     aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <input type="button" class="btn btn-primary" id="editModalLabel">
                </input>
            </div>
            <div class="modal-body">
                <textarea class="form-control" rows="10" id="editModalContent" name="editModalContent"></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary" onclick="addTemplate()">
                    提交更改
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div>
</div>
<!-- End of Page content -->
<%include file="footer.html" />
</body>
</html>
